# [TIL] 2023.12.25 🧑🏻‍🏫

## 메모리 단편화 💡
메모리 공간이 충분함에도 불구하고, 연속적이고 충분한 크기의 메모리 영역을 할당할 수 없는 상태

* 내부 단편화 : 메모리 공간을 할당한 후 할당된 블록내에서 사용하지 않는 공간이 발생하는 것
* 외부 단편화 : 메모리 공간이 충분함에도 불구하고, 이 공간이 작은 조각들로 나뉘어져 연속된 메모리 공간을 할당받지 못하는 상태

## Filter, interceptor, AOP 💡
**Filter**
* 서블릿 필터로서, 서블릿 컨테이너 수준에서 동작
* 스프링 컨텍스트와는 독립적으로 작동
* HTTP 수준에서의 다양한 공통 작업을 처리

**Interceptor**
* 스프링 MVC의 컨트롤러에 도달하기 전/후로 실행
* 스프링 컨텍스트의 모든 빈에 접근이 가능
* 컨트롤러의 실행과정을 좀 더 세밀하게 관리하고, 스프링이 관리하는 자원들을 활용

**AOP**
* 메서드 호출 전/후, 예외 발생 시점 등 다양한 시점에 advice(실행될 로직)를 삽입하여 작업을 수행
* 스프링 프레임워크와 강하게 통합되어있어, 스프링의 다른 요소들과의 연동이 매우 용이
* 선언적 트랜잭션 관리, 로깅, 보안 등의 크로스컷팅 관심사를 처리해야하는데 매우 효과적

### Q. 컨트롤러 시점에서 Interceptor와 AOP의 차이점은 무엇일까 ?
* Proxy 기술 사용 여부 &rarr; AOP에서 사용
* **`하나는 답을 못했다.. 스크립트를 보면서 다시 한번 복습하자`**


## 스프링 빈 생명주기
데이터베이스 커넥션 풀이나, 네트워크 소켓처럼 애플리케이션 시작 시점에 필요한 연결을 미리 해두고, 애플리케이션 종료 시점에 연결을 모두 종료하는 작업을 진행하려면, 
객체의 초기화와 종료 작업이 필요하다.

**`스프링 빈의 이벤트 라이프사이클`**

**스프링 컨테이너 생성** &rarr; **스프링 빈 생성** &rarr; **의존관계 주입** &rarr; **초기화 콜백** &rarr; **사용** &rarr; **소멸전 콜백** &rarr; **스프링 종료**

> **초기화 콜백**: 빈이 생성되고, 빈의 의존관계 주입이 완료된 후 호출
>
> **소멸전 콜백**: 빈이 소멸되기 직전에 호출

최근 현업에서는 초기화 콜백과 소멸전 콜백은 **@PostConstruct, @PreDestroy** 어노테이션을 사용
* 최근 스프링에서 가장 권장하는 방법
* 어노테이션 하나만 붙이면 되므로 매우 편리하다
* 스프링에 종속된 기술이 아닌 JSR-250라는 자바 표준임. 따라서 스프링이 아닌 다른 컨테이너에서도 동작함
* 컴포넌트 스캔과 잘 어울린다
* 유일한 단점은 외부 라이브러리에는 적용하지 못한다는 것
* 외부 라이브러리를 초기화, 종료해야하면 `@Bean` 기능(옵션) 사용을 권장  
&rarr; `@Bean(initMethod = "init", destroyMethod = "close")`
