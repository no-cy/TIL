# JPA Lock 종류 

### 1. 낙관적(Optimistic Lock)
* 엔티티가 마지막으로 읽힌 시점부터 현재까지 변경되지 않았음을 가정한다.
* **데이터베이스 레벨에서 락을 사용하는 것이 아닌, 버전(version) 필드를 사용하여 엔티티 변경 여부를 감지한다.**
> **버전(version) 필드** :
> * 엔티티의 데이터가 마지막으로 변경된 시점을 추적하기 위해 사용되는 특별한 필드
> * 데이터베이스 레코드의 버전을 나타내며, 데이터베이스 트랜잭션이 해당 엔티티를 수정할 때마다 자동으로 증가
> * 동시성 제어를 위해 사용되며, 데이터의 일관성 유지를 위해 중요한 역할을 한다
* 트랜잭션이 커밋되는 시점에 버전이 변경되었는지 확인하여, 변경이 감지되면 **`OptimisticLockException`** 을 발생시켜 충돌을 알린다.

### 2. 비관적(Pessimistic Lock)
* 엔티티에 대한 동시 변경을 방지하기 위해 데이터베이스 레벨에서 락을 걸어 다른 트랙잭션의 접근을 제한한다
* 주로 동시성이 높은 애플리케이션에서 사용되며, 데이터의 일관성을 유지해야 할 때 유용하다
* 비관적 락에는 두 가지 유형이 있다.
  * **비관적 읽기 락(Pessimistic Read Lock)** :
    * 다른 트랜잭션이 읽기는 가능하지만, 수정은 할 수 없도록 한다.
    * 일관된 읽기 작업을 보장한다.
  * **비관적 쓰기 락(Perssimistic Write Lock)** :
    * 해당 엔티티에 대한 모든 접근을 차단하며, 락을 건 트랜잭션이 엔티티를 읽고 수정할 수 있도록 한다.
    * 엔티티를 수정하기 전에 일관성을 유지해야 하는 경우에 사용된다.

### 3. 낙관적 강제(Optimistic Force Increment)
* 낙관적 락과 유사하지만, 트랜잭션이 커밋될 때마다 엔티티의 버전을 강제로 증가시킨다.
* 이 방식은 엔티티 자체는 변경되지 않았지만, 엔티티에 연결된 컬렉션이나 다른 엔티티가 변경된 경우에 유용하다.
