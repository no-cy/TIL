# OSIV(Open Session In View)

직역하면 세션을 뷰까지 열어둔다. (영속성 컨텍스트를 뷰까지 열어두는 것)  
데이터베이스 세션을 요청의 시작부터 끝까지 유지하는 하는 것을 말함.

### 기존 OSIV (요청당 트랜잭션)
**장점**
- 요청 처리 과정에서 필요한 데이터를 필요한 시점에 지연 로딩할 수 있다.
- 앱의 여러 계층에서 동일한 데이터베이스 세션을 사용할 수 있으므로, 데이터 접근 로직을 단순화 할 수 있음
- 요청이 처리되는 동안 동일한 데이터베이스 세션을 사용함으로써 데이터의 일관성을 유지할 수 있음

**단점**
- 요청의 전체 생명 주기동안 데이터베이스 세션을 열어두어야 하므로, 리소스 사용량이 증가할 수 있다.
- 프레젠테이션 계층에서 엔티티를 수정할 수 있어, 데이터 일관성을 해칠 위험이 있음.
- 동시 접속 트랙픽이 많은 실시간 API 서버일 경우, 지연 로딩이 많이 발생하여 성능 문제로 이어질 수 있음.

### 스프링 OSIV
**기존 OSIV에서 개선된 점**
- 프레젠테이션 계층에서 영속성 컨텍스트를 열기만 하고, 트랜잭션을 시작하지는 않는다.
- 서비스 계층에서 트랜잭션이 시작되고, 종료되지만 역속성 컨텍스트는 닫히지 않는다.
- 요청 처리 과정이 완료되면 영속성 컨텍스트는 닫힌다.
- 따라서 프레젠테이션 계층에서는 트랜잭션이 없으므로 엔티티를 수정할 수 없다.
- 프레젠테이션 계층에서는 엔티티를 읽을 수만 있다.
- **하지만, 요청 생명주기 동안 데이터베이스 세션을 지속적으로 열어 두는 것은 동일하다.**

