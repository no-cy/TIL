# 파티셔닝과 샤딩

### **파티셔닝이란?**
- **하나의 테이블을 여러 개의 테이블로 분할하는 작업**
- 큰 데이터를 여러 테이블로 나누어 저장하기 때문에 쿼리 성능이 개선될 수 있다.
- 데이터는 물리적으로 여러 테이블로 분산하여 저장되지만, 사용자는 마치 하나의 테이블에 접근하는 것과 같이 사용할 수 있다.
---
### **MySQL 파티셔닝 종류**

**List Partitioning**
- 데이터 값이 특정 목록에 포함된 경우 데이터를 분리한다.
- 예를 들어, 특정 지역 별로 데이터를 분할할 때 사용될 수 있다.

**Range Partitioning**
- 데이터를 특정 범위 기준으로 분할할 때 사용한다.
- 예를 들어, 1 ~ 2월, 3 ~ 4월, 5 ~ 6월 ... 으로 데이터를 분리할 때 사용한다.

**Hash Partitioning**
- 해시 함수를 사용하여 데이터를 분할할 때 사용한다.
- 특정 컬럼의 값을 해싱하여 저장할 파티션을 선택한다.
- MySQL 공식 문서에 따르면, 여러 컬럼으로 해싱하는 것은 크게 권장하지 않는다.

**Composite Partitioning**
- 위 파티셔닝 종류 중 두 개 이상을 사용하는 방식
---
### **샤딩이란?**
- **동일한 스키마를 가지고 있는 여러 대의 데이터베이스 서버들에 데이터를 작은 단위로 나누어 분산 저장하는 기법**
- 작은 단위를 샤드(shard)라고 한다.
- 물리적으로 서로 다른 데이터베이스에 데이터를 저장하므로, 쿼리 성능 향상과 더불어 부하가 분산되는 효과까지 얻을 수 있다.
- 즉, 샤딩은 데이터베이스 차원의 수평 확장(scale-out)인 셈이다.
---
### **샤딩과 수평 파티셔닝의 차이점**
- 파티셔닝은 모든 데이터를 동일한 DB에 저장하지만, 샤딩은 데이터를 여러 대의 DB에 분산하여 저장한다.

---
### **샤딩은 언제 사용하는가?**
- 물리적으로 분산된 환경에서 사용되는 기법으로 데이터베이스 차원이 아닌 애플리케이션 레벨에서 구현하는 것이 일반적
- 플랫폼 차원에서 제공
---
### **샤딩 주의점**
- 데이터를 물리적으로 독립된 데이터베이스에 각각 분할하여 저장하므로, 여러 샤드에 걸친 데이터를 조인하는 것이 어렵다.
- 한 데이터베이스에 집중적으로 데이터가 몰리면 Hotspot이 되어 성능이 느려진다. 따라서, 데이터를 여러 샤드로 고르게 분배하는 것이 중요하다.
---
### **샤딩 종류**
샤딩 종류는 다양하지만, 크게 Hash Sharding, Range Sharding 두 가지가 있다.

Hash Sharding 



**참고:**
- https://hudi.blog/db-partitioning-and-sharding/
- https://code-lab1.tistory.com/202
